<mat-card>
  <mat-card-header>
    <mat-card-title>
      <app-user-location-manager
        class="marginleftselect"
      ></app-user-location-manager>
      <app-user-location-manager
        class="marginleftselect"
      ></app-user-location-manager>
      <app-user-location-manager
        class="marginleftselect"
      ></app-user-location-manager>
    </mat-card-title>
  </mat-card-header>

  <!-- Select list to Country -->
  <mat-form-field>
    <mat-label>Selecione o País...</mat-label>
    <mat-select
      [formControl]="formMatCountrySelect"
      [errorStateMatcher]="matcherCustom"
      (selectionChange)="changeCountry($event.value)"
    >
      <mat-option *ngFor="let country of countries" [value]="country.id">{{
        country.label
      }}</mat-option>
    </mat-select>
    <mat-error *ngIf="formMatCountrySelect.hasError('required')"
      >Selecione um País!</mat-error
    >
    <mat-error
      *ngIf="
        formMatCountrySelect.hasError('pattern') &&
        !formMatCountrySelect.hasError('required')
      "
    >
      Your selection is invalid
    </mat-error>
  </mat-form-field>

  <!-- Select list to States -->
  <mat-form-field *ngIf="selectedCountryId">
    <mat-label>Selecione o Estado...</mat-label>
    <mat-select
      [formControl]="formMatStatesSelect"
      [errorStateMatcher]="matcherCustom"
      (selectionChange)="changeState($event.value)"
    >
      <mat-option *ngFor="let state of states" [value]="state.id">{{
        state.label
      }}</mat-option>
    </mat-select>
    <mat-error *ngIf="formMatStatesSelect.hasError('required')"
      >Selecione um Estado!</mat-error
    >
    <mat-error
      *ngIf="
        formMatStatesSelect.hasError('pattern') &&
        !formMatStatesSelect.hasError('required')
      "
    >
      Your selection is invalid
    </mat-error>
  </mat-form-field>

  <!-- Select list to Cities -->
  <mat-form-field *ngIf="selectedStateId" class="marginleftselect">
    <mat-label>Selecione a Cidade...</mat-label>
    <mat-select
      [formControl]="formMatCitiesSelect"
      [errorStateMatcher]="matcherCustom"
      (selectionChange)="changeCity($event.value)"
    >
      <mat-option *ngFor="let city of cities" [value]="city.id">{{
        city.label
      }}</mat-option>
    </mat-select>
    <mat-error *ngIf="formMatCitiesSelect.hasError('required')"
      >Selecione uma Cidade!</mat-error
    >
    <mat-error
      *ngIf="
        formMatCitiesSelect.hasError('pattern') &&
        !formMatCitiesSelect.hasError('required')
      "
    >
      Your selection is invalid
    </mat-error>
  </mat-form-field>
  <div *ngIf="selectedCityId">
    <p>Usando Observables com Angular!</p>

    <button mat-raised-button (click)="chamarSemSubscribe()" color="primary">
      Chamar com Async Observable
    </button>

    <button mat-raised-button (click)="chamarComSubscriber()" color="primary">
      Chamar com Subscriber
    </button>

    <button mat-raised-button (click)="inscreverEmEvento()" color="secondary">
      Inscrever-se
    </button>

    <button mat-raised-button (click)="desinscrever()" color="secondary">
      Desinscrever-se
    </button>

    <br />
    <br />

    <app-subject-teste-um></app-subject-teste-um>
    <br />
    <br />
    <app-subject-teste-dois></app-subject-teste-dois>
    <br />
    <br />
    <app-subject-teste-tres></app-subject-teste-tres>
    <br />

    <mat-list *ngIf="(users$ | async)?.length">
      <mat-list-item *ngFor="let user of users$ | async">
        {{ user.id }} - {{ user.login }}
      </mat-list-item>
    </mat-list>

    <mat-list *ngIf="users?.length">
      <mat-list-item *ngFor="let user of users">
        {{ user.id }} - {{ user.login }}
      </mat-list-item>
    </mat-list>
  </div>
</mat-card>
